<p>Today, I give a comparison between Norikra and InfluxDB in terms of query features.</p>

<h2>What is Norikra, and What is InfluxDB</h2>

<p><a href="http://norikra.github.io/">Norikra</a> is a Schema-less Stream Processor based on Esper, which is a kind of CEP (Complex Event Processing) engine. With Norikra, we can use highly-functional SQL-like query for processing time series streaming data.</p>

<p><a href="http://influxdb.org/">InfluxDB</a> is a distributed time series database, which has a SQL-like query language designed for working with time series and analytics.
It has a feature called &ldquo;Continuous Query&rdquo; which applies queries charged in advance, and stores the resulted data into a Series (which is like a &ldquo;table&rdquo; of RDBMS) progressively.</p>

<p>It looks both can do similar things.</p>

<p>So, I compared Norikra and InfluxDB in terms of query features. I felt that it would be nice to use InfluxDB if it has a sufficent features in anticipation of the data persistence.</p>

<h2>TR; DR</h2>

<p>Norikra won</p>

<h2>Feature Catalog</h2>

<p>I just write catalog tables here.</p>

<h3>Aggregation Fuctions</h3>

<pre><code>       | Norikra | InfluxDB | NOTE                        
</code></pre>

<p>&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;|&mdash;&mdash;&mdash;&mdash;&ndash;|&mdash;&mdash;&mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
COUNT      | YES     | YES      |                           <br/>
MIN        | YES     | YES      |                           <br/>
MAX        | YES     | YES      |                           <br/>
AVG        | YES     | YES      |                           <br/>
MEAN       | YES     | YES      |                           <br/>
MODE       | NO      | YES      |                           <br/>
MEDIAN     | NO      | YES      |                           <br/>
DISTINCT   | YES     | YES      |                           <br/>
PERCENTILE | YES     | YES      | <a href="https//github.com/norikra/norikra-udf-percentile">implemented as a UDF</a>
HISTOGRAM  | NO      | YES      |                           <br/>
DERIVATIVE | NO      | YES      |                            <br/>
SUM        | YES     | YES      |                           <br/>
STDDEV     | NO      | YES      |                           <br/>
FIRST      | YES     | YES      |                           <br/>
LAST       | YES     | YES      |                           <br/>
MAXBY      | YES     | NO       |                           <br/>
MINBY      | YES     | NO       |</p>

<p>NOTE: Norikra supports UDF, so users can create functions by themselves if want</p>

<h3>Features of Query</h3>

<pre><code>                          | Norikra | InfluxDB | NOTE                                                              
</code></pre>

<p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&ndash;|&mdash;&mdash;&mdash;&mdash;&mdash;|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
Time batch window             | YES     | YES      | Of course, both support the feature to aggregate in each interval
Externally timed batch window | YES     | NO       | A feature to aggregate based on the time field of messages      <br/>
Sub query                     | YES     | NO       |                                                                 <br/>
JOIN                          | YES     | YES      |                                                                 <br/>
MERGE                         | NO      | YES      | A feature of InfluxDB to merge results from multiple tables. One use regular expressions for tables
Query group                   | YES     | NO       | Name a group for queries                                        <br/>
Program codes                 | YES     | NO       | One can write Java codes on Norikra queries                      <br/>
Nested JSON                   | YES     | NO       | One can specify fields like parrent.child when JSON is nested    <br/>
GROUP BY                      | YES     | YES      |                                                                 <br/>
HAVING                        | YES     | NO       |                                                                 <br/>
ORDER BY                      | YES     | NO       | InfluxDB has <code>order</code>, but it is only for the <code>time</code> field       <br/>
UDF                           | YES     | NO       |</p>

<h2>Conclusion</h2>

<p>Norikra won overwhelmingly. That said, because InfluxDB is storage, but Norikra is an on-memory engine, the value of InfluxDB shall not be impaired in any way.</p>
